# 📋 更新日志

## [2.2.0] - 2025-08-30

### ⚙️ 全新设置系统
- **设置上下文**: 创建全局设置状态管理，支持实时设置同步
- **设置模态框**: 美观的弹窗式设置界面，分标签管理不同类型设置
- **本地存储**: 所有设置自动保存到localStorage，持久化用户偏好

### 🎨 外观个性化
- **主题切换**: 支持浅色/深色/自动三种主题模式
- **字体大小**: 提供小/中/大三种字体大小选择
- **字体族**: 支持系统字体/衬线字体/等宽字体切换
- **实时预览**: 所有外观设置立即生效，无需刷新页面

### 📝 编辑器增强
- **自动保存**: 可选的输入内容自动保存功能
- **行号显示**: 可选的文本区域行号显示
- **个性化配置**: 根据用户偏好调整编辑体验

### 🌐 语言设置优化
- **语言切换**: 将语言切换功能移至设置页面统一管理
- **Bug修复**: 修复Header中"Index.switchLocale"显示错误
- **国际化**: 完善中英文界面切换体验

### 🔧 技术改进
- **设置按钮**: Header中添加齿轮图标设置按钮
- **暗色主题CSS**: 完整的暗色主题样式支持
- **响应式设计**: 设置界面适配不同屏幕尺寸
- **用户体验**: 优化设置界面的交互和视觉效果

## [2.1.1] - 2025-08-30

### 🎉 构建问题修复
- **构建错误修复**: 解决了构建时的模块导入错误
- **模块导入统一**: 修复了多个文件中的模块导入错误
- **类型定义修复**: 统一了接口定义，添加缺失字段
- **代码清理**: 移除重复文件，统一代码结构
- **简化构建流程**: 移除构建时对本地脚本文件的依赖
- **标准化构建**: 使用标准的构建命令，提升构建稳定性

### 🚀 部署流程简化
- **开箱即用**: 部署完成后无需手动配置即可使用
- **简化部署**: 仅需设置 `OPENAI_API_KEY` 即可完成部署

### 🔧 技术优化
- **跨平台兼容**: 支持不同运行时环境
- **构建稳定性**: 消除了不同环境中的构建差异
- **用户体验**: 大幅提升部署和使用的便利性

### 🔧 生产环境问题修复
- **🔧 Crypto模块问题**: 彻底解决Edge Runtime中crypto模块兼容性问题，改用标准Node.js API路由
- **✅ 405错误修复**: 修复API路由的Method Not Allowed错误，确保POST请求正常处理
- **🔑 服务器繁忙问题**: 修复生产环境中API密钥配置导致的"服务器繁忙"错误
- **API密钥逻辑**: 优化API密钥检查逻辑，支持系统密钥和用户密钥的灵活配置
- **错误处理**: 增强错误信息的详细程度，便于问题诊断
- **诊断工具**: 新增快速诊断页面，帮助用户快速定位生产环境问题
- **📝 文字对齐**: 确保所有生成的周报内容文字都左对齐，提升阅读体验
- **📋 列表样式**: 修复序号和标题换行显示问题，使用list-outside确保正确对齐
- **⏱️ 超时优化**: 针对Vercel免费计划10秒限制进行优化，改进超时处理机制
- **🔄 流式恢复**: 增强流式传输的错误恢复能力，避免单点故障中断整个生成过程
- **📦 分块生成**: 新增分块生成API，支持长内容在免费计划限制下的完整生成

### 📚 文档更新
- **部署指南**: 更新DEPLOYMENT_GUIDE.md，反映新的简化流程
- **README**: 更新部署说明，突出零配置特性
- **用户指引**: 优化JWT配置说明，强调自动处理机制

## [2.1.0] - 2025-08-30

### 🚀 Node.js 版本升级
- **Node.js 22 支持**: 升级支持 Node.js 18.0.0 - 22.x 版本
- **依赖更新**: 更新所有依赖到最新兼容版本
- **构建优化**: 优化构建过程，提升编译速度
- **类型修复**: 修复 TypeScript 类型错误和编译警告

### 🔧 技术改进
- **代码清理**: 移除未使用的变量和导入
- **错误修复**: 修复Link组件使用不当的问题
- **Vercel优化**: 优化Vercel部署配置，避免运行时限制

## [2.0.0] - 2025-08-09

### 🎯 项目简化重构
- **简化项目结构**: 删除了复杂的Docker部署和多平台支持
- **专注核心功能**: 保留周报生成的核心功能，删除非必要特性
- **界面优化**: 删除了不必要的UI元素，保持简洁设计

### ✨ 新增功能
- **调试面板**: 新增 `/debug` 页面，提供系统状态检查
- **健康检查**: 恢复 `/api/health` 端点，用于服务状态监控
- **环境检查**: 集成环境变量和API连接测试

## [1.5.0] - 2024-11-XX

### ✨ 新特性
- 🔄 **多API源支持**: 支持 OpenAI、DeepSeek、Moonshot、智谱AI 等多种 API 源
- 🌐 **环境变量配置**: 通过环境变量灵活配置 API 源和模型
- 🚀 **Node.js 22 支持**: 升级到最新的依赖和 Node.js 版本
- ☁️ **Vercel 优化**: 保持完美的 Vercel 部署兼容性
- 🛡️ **错误处理**: 增强的错误处理和超时控制
- 📝 **TypeScript**: 完整的 TypeScript 支持

### 🔧 技术改进
- 升级了所有依赖到最新版本
- 优化了API调用逻辑
- 改进了错误处理机制
- 增强了类型安全

## [1.0.0] - 2023-XX-XX

### 🎉 首次发布
- **核心功能**: 基于GPT的周报生成功能
- **多语言支持**: 支持中文和英文界面
- **响应式设计**: 适配桌面和移动设备
- **实时生成**: 流式输出，实时显示生成过程
- **Markdown支持**: 支持Markdown格式输出
- **Vercel部署**: 一键部署到Vercel平台

### 🔧 支持的API源
- OpenAI GPT-3.5/GPT-4
- 自定义API端点支持

### 📱 界面特性
- 简洁的用户界面
- 实时Markdown渲染
- 复制功能
- 响应式布局

---

## 版本说明

- **主版本号**: 重大功能变更或架构调整
- **次版本号**: 新功能添加
- **修订版本号**: Bug修复和小改进

## 贡献指南

欢迎提交Issue和Pull Request来帮助改进项目！